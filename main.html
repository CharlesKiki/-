<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<script type="text/javascript">
	        document.addEventListener('plusready', plusReady);
	        function plusReady(){
	            main();
        }
    </script>
		<title></title>
		<link href="css/mui.min.css" rel="stylesheet" />

		<style>
			ul {
				font-size: 14px;
				color: #8f8f94;
			}
			.mui-btn {
				padding: 10px;
			}
			html,
			body {
				background-color: #efeff4;
			}
			
			.title {
				margin: 20px 15px 10px;
				color: #6d6d72;
				font-size: 15px;
				padding-bottom: 51px;
			}
			.mui-content-padded{
				 padding-top: 44px;
				 /* 此处的CSS修饰了顶部的导航栏和其他DIV的空间关系，防止重叠*/
			}
		</style>
	</head>
	<body>
	<header class="mui-bar mui-bar-nav" style="padding-right: 15px;">
		<h1 class="mui-title">登录模板</h1>
		<!--<button id='setting' class=" mui-pull-right mui-btn-link">设置</button>-->
	</header>
	
	<video id="video" autoplay></video>
	
	<script>
		function main()
		{	
	    var IntentMana = plus.android.importClass('android.content.Intent');
	    var MediaStore = plus.android.importClass('android.provider.MediaStore');
	    var App        = plus.android.runtimeMainActivity();
	    var Uri        = plus.android.importClass('android.net.Uri');
	    var FILE       = plus.android.importClass('java.io.File');
	    var intent  = new IntentMana(MediaStore.ACTION_IMAGE_CAPTURE);
	
	    var vfile    = new FILE("/storage/emulated/0/my/test/img.jpg");
	
	    if(!vfile.exists())
	    {
	        var vDirPath = vfile.getParentFile(); //new File(vFile.getParent());
	        vDirPath.mkdirs();
	    }
	    else{
	        alert("文件存在!");
	    }
	
	    var uri = Uri.fromFile(vfile);
	    //
	    intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);//
	    App.startActivityForResult(intent,100);
	
		}
	</script>
	
	<!--底部的导航栏-->
	<nav class="mui-bar mui-bar-tab">
	    <a class="mui-tab-item mui-active" id="SchoolMessage" href="SchoolMessage.html">
	        <span class="mui-icon mui-icon-chatboxes"></span>
	        <span class="mui-tab-label">校信</span>
	    </a>
	    <a class="mui-tab-item" id="Contacts" href="Contacts.html">
	        <span class="mui-icon mui-icon-phone"></span>
	        <span class="mui-tab-label">通讯录</span>
	    </a>
	    <a class="mui-tab-item" id="OtherFeatures" href="OtherFeatures.html">
	        <span class="mui-icon mui-icon-bars"></span>
	        <span class="mui-tab-label">道馆通</span>
	    </a>
	    <a class="mui-tab-item" id="FriendCircle" href="FriendCircle.html">
	        <span class="mui-icon mui-icon-pengyouquan"></span>
	        <span class="mui-tab-label">广场</span>
	    </a>
	    <a class="mui-tab-item" id="Setting" href="Setting.html">
	        <span class="mui-icon mui-icon-gear"></span>
	        <span class="mui-tab-label">设置</span>
	    </a>
	</nav>
	
		<script src="js/mui.min.js"></script>
		<script src="js/app.js"></script>
		<script>
			(function($, doc) {
				$.init();
				var settings = app.getSettings();
				var account = doc.getElementById('account');
				//
				window.addEventListener('show', function() {
					var state = app.getState();
					account.innerText = state.account;
				}, false);
				//预加载页面，加速访问速度
				$.plusReady(function() {
				//处理底部导航栏逻辑
				//var subpages = ['SchoolMessage.html','FriendCircle.html','OtherFeatures.html','Contacts.html','setting.html'];
				var winAll=plus.webview.all();//获取所有窗体
				//console.log(JSON.stringify(winAll))
				//当前激活选项卡
				//var activeTab = subpages[0];
				var FriendCircle,OtherFeatures,Contacts,SchoolMessage
				//选项卡点击事件
				//方法一
					//注意这个地方不知道是通过WebView进行打开的，是否会受到预处理的加速
					//还是直接又打开了一个新的WebView
				document.getElementById('SchoolMessage').addEventListener('tap', function() {
				//打开关于页面
					mui.openWindow({
						url: 'SchoolMessage.html', //目标页面地址
						id:'SchoolMessage', //触发新打开页面的id
						styles:{
				        top:'44px',//mui标题栏默认高度为45px；
				        bottom:'70px'//默认为0px，可不定义；
				      }
					});
				});
				document.getElementById('Contacts').addEventListener('tap', function() {
				//打开关于页面
					mui.openWindow({
						url: 'Contacts.html', //目标页面地址
						id:'Contacts', //触发新打开页面的id
						styles:{
				        top:'44px',//mui标题栏默认高度为45px；
				        bottom:'70px'//默认为0px，可不定义；
				      }
					});
				});
				document.getElementById('OtherFeatures').addEventListener('tap', function() {
				//打开关于页面
					mui.openWindow({
						url: 'OtherFeatures.html', //目标页面地址
						id:'OtherFeatures', //触发新打开页面的id
						styles:{
				        top:'44px',//mui标题栏默认高度为45px；
				        bottom:'70px'//默认为0px，可不定义；
				      }
					});
				});
				document.getElementById('Setting').addEventListener('tap', function() {
				//打开关于页面
					mui.openWindow({
						url: 'setting.html', //目标页面地址
						id:'setting', //触发新打开页面的id
						styles:{
				        top:'44px',//mui标题栏默认高度为45px；
				        bottom:'70px'//默认为0px，可不定义；
				      }
					});
				});
				//方法二
				mui(".mui-bar mui-bar-tab").on("tap","#SchoolMessage",function(){
					var targetTab = this.getAttribute('href');
					SchoolMessage=plus.webview.getWebviewById("SchoolMessage");
//					//console.log(JSON.stringify(SchoolMessage)) 
					SchoolMessage.show()
					FriendCircle.hide()
					OtherFeatures.hide()
					Contacts.hide()
//					if (targetTab == activeTab) {
//				            return;
//				    }
//				    //显示目标选项卡
//				    plus.webview.show(targetTab);
//				    //隐藏当前;
//				    plus.webview.hide(activeTab);
//				    //更改当前活跃的选项卡
//				    activeTab = targetTab;
				})
				mui("#bottombar").on("tap","#Contacts",function(){//点击触发
					a2=plus.webview.getWebviewById("a2");
					a2.show()
					
				})
				mui("#bottombar").on("tap","#a3",function(){//点击触发
					a3=plus.webview.getWebviewById("a3");
					a3.show()
					
				})
					//设置
					var settingButton = doc.getElementById('setting');
					//settingButton.style.display = settings.autoLogin ? 'block' : 'none';
					settingButton.addEventListener('tap', function(event) {
						$.openWindow({
							id: 'setting',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: false
							}
						});
					});
					//--
					$.oldBack = mui.back;
					var backButtonPress = 0;
					$.back = function(event) {
						backButtonPress++;
						if (backButtonPress > 1) {
							plus.runtime.quit();
						} else {
							plus.nativeUI.toast('再按一次退出应用');
						}
						setTimeout(function() {
							backButtonPress = 0;
						}, 1000);
						return false;
					};
				});
			}(mui, document));
		</script>
		<!--处理底部导航栏的切换逻辑：
			这几个页面用户使用频繁，需要提前进行处理
			<script type="text/javascript" charset="utf-8">


		</script>-->
	</body>

</html>